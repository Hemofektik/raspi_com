<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Security-Policy" content="unsafe-inline">

    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <title>raspicom</title>
</head>
<body>
    <div class="app">
        <h1>raspi:com</h1>

        <div class="time now" onclick="setTime(0)" id="time">time</div>

        <div class="time" onclick="setTime(10)">10</div>
        <div class="time" onclick="setTime(30)">30</div>
        <div class="time" onclick="setTime(60)">60</div>
        <div class="time" onclick="setTime(90)">90</div>
        <div class="time" onclick="setTime(120)">120</div>
        <div class="time stop" onclick="stop()">stop</div>

        <div id="status" class="blink">
            <p class="event error">Verbindungsfehler!</p>
        </div>
        <!--<div id="deviceready" class="blink">
            <p class="event listening">Die Verbindung mit dem Gerät wird hergestellt.</p>
            <p class="event received">Das Gerät ist bereit.</p>
        </div>-->
    </div>
    <script type="text/javascript" src="scripts/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="scripts/platformOverrides.js"></script>
    <script type="text/javascript" src="scripts/appBundle.js"></script>

    <script>

        setTime = function (time) {
            raspicom.Application.setTime(time);
        };

        stop = function (time) {
            raspicom.Application.stop();
        };

        window.isNativeApp = function () {
            return /^file:\/{3}[^\/]/i.test(window.location.href) && /ios|iphone|ipod|ipad|android|IEMobile/i.test(navigator.userAgent);
        };

        window.onload = function () {
            if (!isNativeApp()) {
                raspicom.Application.initialize();

                var event = document.createEvent('Event');
                event.initEvent('deviceready', true, true);

                document.dispatchEvent(event);
            }
        };

    </script>

</body>
</html>